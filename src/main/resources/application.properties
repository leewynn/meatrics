server.port=${PORT:8080}

# ==========================================
# Logging Configuration
# ==========================================
# Log file location (default: ./logs in current directory)
# Override with: -DLOG_PATH=/path/to/logs or environment variable LOG_PATH
logging.file.path=${LOG_PATH:./logs}
logging.file.name=${LOG_PATH:./logs}/meatrics.log

# Log levels
logging.level.root=INFO
logging.level.com.meatrics=INFO
logging.level.org.springframework=INFO
logging.level.org.atmosphere=WARN
logging.level.org.jooq=INFO

# ==========================================
# Vaadin Configuration
# ==========================================
# Production mode (set to true for production deployment)
# In production mode: optimized bundle, no dev server, minified resources
vaadin.productionMode=${VAADIN_PRODUCTION_MODE:false}

# Launch the default browser when starting the application in development mode
# Should be false in production
vaadin.launch-browser=${VAADIN_LAUNCH_BROWSER:true}

# To improve the performance during development.
# For more information https://vaadin.com/docs/latest/flow/integrations/spring/configuration#special-configuration-parameters
vaadin.allowed-packages=com.vaadin,org.vaadin,com.flowingcode,com.meatrics

# Close idle UI instances to free memory (recommended for production)
# vaadin.closeIdleSessions=true
# vaadin.heartbeatInterval=300

# ==========================================
# Database Configuration
# ==========================================
# All database settings in one place
# Override using environment variables or -D system properties

# Database connection settings
db.name=${DB_NAME:meatrics}
db.host=${DB_HOST:localhost}
db.port=${DB_PORT:5432}
db.username=${DB_USERNAME:postgres}
db.password=${DB_PASSWORD:password}
db.client-name=${DB_CLIENT_NAME:meatrics-app}

# Spring DataSource configuration
spring.datasource.url=jdbc:postgresql://${db.host}:${db.port}/${db.name}?ApplicationName=${db.client-name}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.username=${db.username}
spring.datasource.password=${db.password}

# Connection pool settings
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000

# Liquibase configuration
# Runs automatically on application startup
spring.liquibase.enabled=true
spring.liquibase.change-log=classpath:db/changelog/db.changelog-master.xml

# jOOQ configuration
spring.jooq.sql-dialect=POSTGRES
